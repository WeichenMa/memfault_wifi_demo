# ================================================================
# File Name    : prj.conf
# Description  : Zephyr-Memfault project configuration 
# Author       : Miles Osborne
# Date         : 2024-10-20
# Version      : 1.0
# ================================================================

# ================================================================
# Memfault configuration:
# ================================================================

## --------------------------------------------------------------
## Enable Memfault! ðŸŽ‰
## --------------------------------------------------------------
CONFIG_MEMFAULT=y
CONFIG_MEMFAULT_NCS_PROJECT_KEY="dHuMDcUTqM6zRocTFkT9wiyo0j39j9BL"
CONFIG_MEMFAULT_SHELL=y
CONFIG_MEMFAULT_HTTP_PERIODIC_UPLOAD=y
CONFIG_MEMFAULT_LOGGING_ENABLE=y
CONFIG_MEMFAULT_LOG_LEVEL_DBG=y

## --------------------------------------------------------------
## Configure the Memfault software_version and device_serial 
## defaults
## --------------------------------------------------------------
CONFIG_MEMFAULT_NCS_FW_TYPE="app"
CONFIG_MEMFAULT_NCS_DEVICE_ID_STATIC=y
CONFIG_MEMFAULT_NCS_DEVICE_ID="ncs-ble-testdevice"
## Note: in production, you will want to use memfault_ncs_device_id_set()
## to apply the real device serial on system initialization (i.e. retrieved
## from NVS, for the serial written during manufacturing)

## --------------------------------------------------------------
## Wi-Fi credentialS
## --------------------------------------------------------------
# Below configs need to be modified based on security
# CONFIG_STA_KEY_MGMT_NONE=y
# CONFIG_STA_KEY_MGMT_WPA2=y
# # CONFIG_STA_KEY_MGMT_WPA2_256=y
# # CONFIG_STA_KEY_MGMT_WPA3=y
# CONFIG_STA_SAMPLE_SSID="AirPennNet-Device"
# CONFIG_STA_SAMPLE_PASSWORD="penn1740wifi"

## --------------------------------------------------------------
## Logging
## --------------------------------------------------------------
CONFIG_LOG=y
CONFIG_LOG_MODE_IMMEDIATE=y

## --------------------------------------------------------------
## For more verbose and detailed log output, set the log level 
## to CONFIG_MEMFAULT_SAMPLE_LOG_LEVEL_DBG=y instead.
## --------------------------------------------------------------
CONFIG_MEMFAULT_SAMPLE_LOG_LEVEL_INF=y

## --------------------------------------------------------------
## Network
## --------------------------------------------------------------
CONFIG_NETWORKING=y
CONFIG_NET_NATIVE=y
CONFIG_NET_IPV4=y
CONFIG_NET_CONNECTION_MANAGER=y

## --------------------------------------------------------------
## DK
## --------------------------------------------------------------
CONFIG_DK_LIBRARY=y

## --------------------------------------------------------------
## Add to pick up support for sending Memfault data over HTTP
## --------------------------------------------------------------
CONFIG_MEMFAULT_HTTP_ENABLE=y

## --------------------------------------------------------------
## Store coredump to flash
## --------------------------------------------------------------
CONFIG_MEMFAULT_NCS_INTERNAL_FLASH_BACKED_COREDUMP=y
CONFIG_MEMFAULT_COREDUMP_COLLECT_BSS_REGIONS=y

## --------------------------------------------------------------
## Enable the Memfault Diagnostic Service
## --------------------------------------------------------------
CONFIG_BT=y
CONFIG_BT_MDS=y

## --------------------------------------------------------------
## Enable Bluetooth Memfault Metrics
##
## Note: requires BT_SMP (bonding) enabled (see Kconfig)
## --------------------------------------------------------------
CONFIG_MEMFAULT_NCS_BT_METRICS=y

## --------------------------------------------------------------
## Dependency for Memfault shell
## --------------------------------------------------------------
CONFIG_SHELL=y

# ================================================================
# Hardware/Device configuration
# ================================================================

## --------------------------------------------------------------
## Enable Floating Point Unit (FPU)
## --------------------------------------------------------------
CONFIG_FPU=y

## --------------------------------------------------------------
## Dependencies for flash storage
## --------------------------------------------------------------
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_STREAM_FLASH=y

## --------------------------------------------------------------
## Heap and stack sizes
## --------------------------------------------------------------
CONFIG_HEAP_MEM_POOL_SIZE=8192
CONFIG_MAIN_STACK_SIZE=8192
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

## --------------------------------------------------------------
## NET Heap and stack sizes
## --------------------------------------------------------------
CONFIG_NET_CONNECTION_MANAGER_MONITOR_STACK_SIZE=1024
CONFIG_NET_MGMT_EVENT_STACK_SIZE=1024
CONFIG_NET_TX_STACK_SIZE=4096
CONFIG_NET_RX_STACK_SIZE=4096